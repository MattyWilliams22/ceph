<div class="container-fluid">
  @if (startClusterCreation) {
  <div cdsRow
       class="cds-ml-5 cds-mt-5">
    <div cdsCol
         [columnNumbers]="{'lg': 8, 'md': 8, 'sm': 4}">
      <div class="mb-5">
        <!-- htmllint img-req-src="false" -->
        <img [src]="projectConstants.cephLogo"
             alt="Ceph"
             class="img-fluid">
      </div>

      <div class="mb-5">
        <span class="cds--type-fluid-heading-05"
              i18n>Welcome to {{ projectConstants.projectName }}
        </span>
      </div>

      <div class="mb-5">
        <span class="cds--type-fluid-heading-04"
              i18n>Finish cluster setup!
        </span>
      </div>

      <div class="mb-5">
        <span class="cds--type-body-compact-01"
              i18n>
          <cd-icon type="success"
                   [size]="icons.size20">
          </cd-icon>
          You've successfully initialised your ceph cluster
        </span>
      </div>

      <div class="mb-4 cds--type-body-compact-01"
           i18n>A few setup steps are still pending before the cluster can store data and serve workloads. You can complete these now or skip and configure services later</div>

      <div class="mb-5">
        <div class="mb-3">
          <cd-icon type="checkmarkOutline"
                   class="cds-info-color"
                   [size]="icons.size20">
          </cd-icon>
          <span class="cds--type-body-compact-01 cds-ml-3"
                i18n>Add hosts</span>
        </div>
        <div class="mb-3">
          <cd-icon type="circleDash"
                   class="cds-info-color"
                   [size]="icons.size20">
          </cd-icon>
          <span class="cds--type-body-compact-01 cds-ml-3"
                i18n>Add storage</span>
        </div>
        <div>
          <cd-icon type="circleDash"
                   class="cds-info-color"
                   [size]="icons.size20">
          </cd-icon>
          <span class="cds--type-body-compact-01 cds-ml-3"
                i18n>Create data services (optional)</span>
        </div>
      </div>

      <div class="mb-4">
        <button cdsButton="primary"
                class="me-3"
                (click)="createCluster()"
                aria-label="Add Storage"
                i18n>
          Add storage
          <svg [cdsIcon]="icons.add"
               [size]="icons.size20"
               class="cds--btn__icon">
          </svg>
        </button>
        <button cdsButton="tertiary"
                (click)="skipClusterCreation()"
                i18n>
          Skip to cluster overview
          <svg [cdsIcon]="icons.right"
               [size]="icons.size20"
               class="cds--btn__icon">
          </svg>
        </button>
      </div>

      <div class="cds--type-label-01"
           i18n>
        <cd-icon type="infoCircle"
                 [size]="icons.size20">
        </cd-icon>
        Skipping setup does not affect the cluster. The cluster will remain available, but it cannot store data until storage is added
      </div>
    </div>
  </div>
 }
</div>

<div cdsRow
     class="form"
     *ngIf="!startClusterCreation">
  <div cdsCol
       [columnNumbers]="{'lg': 2, 'md': 2, 'sm': 2}"
       class="indicator-wrapper">

    <div class="form-header"
         i18n>Expand Cluster</div>
    <cd-wizard [stepsTitle]="stepTitles"></cd-wizard>
  </div>

  <div cdsCol
       [columnNumbers]="{'lg': 14, 'md': 14, 'sm': 14}">
    <ng-container [ngSwitch]="currentStep?.stepIndex">
      <div *ngSwitchCase="0"
           class="ms-5">
        <h4 class="title"
            i18n>Add Hosts</h4>

        <cd-hosts [hiddenColumns]="['service_instances']"
                  [hideMaintenance]="true"
                  [hasTableDetails]="false"
                  [showGeneralActionsOnly]="true"
                  [showExpandClusterBtn]="false"></cd-hosts>
      </div>
      <div *ngSwitchCase="1"
           class="ms-5">
        <h4 class="title"
            i18n>Create OSDs</h4>
        <div class="alignForm">
          <cd-osd-form [hideTitle]="true"
                       [hideSubmitBtn]="true"
                       (emitDriveGroup)="setDriveGroup($event)"
                       (emitDeploymentOption)="setDeploymentOptions($event)"
                       (emitMode)="setDeploymentMode($event)"></cd-osd-form>
        </div>
      </div>
      <div *ngSwitchCase="2"
           class="ms-5">
        <h4 class="title"
            i18n>Create Services</h4>
        <cd-services [hasDetails]="false"
                     [hiddenServices]="['mon', 'mgr', 'crash', 'agent']"
                     [hiddenColumns]="['status.running', 'status.size', 'status.last_refresh']"
                     [routedModal]="false"></cd-services>
      </div>
      <div *ngSwitchCase="3"
           class="ms-5">
        <cd-create-cluster-review></cd-create-cluster-review>
      </div>
    </ng-container>
    <div cdsRow
         class="m-5">
      <button cdsButton="secondary"
              class="me-3"
              id="skipStepBtn"
              (click)="onSkip()"
              aria-label="Skip this step"
              *ngIf="stepTitles[currentStep?.stepIndex]?.label === 'Create OSDs'"
              i18n>Skip</button>
      <cd-back-button buttonType="secondary"
                      aria-label="Close"
                      (backAction)="onPreviousStep()"
                      [name]="showCancelButtonLabel()"></cd-back-button>
      <button cdsButton="primary"
              (click)="onNextStep()"
              aria-label="Next"
              i18n>{{ showSubmitButtonLabel() }}</button>
    </div>
  </div>
</div>

<ng-template #skipConfirmTpl>
  <span i18n>You are about to skip the cluster expansion process.
             Youâ€™ll need to <strong>navigate through the menu to add hosts and services.</strong></span>

  <div class="mt-4"
       i18n>Are you sure you want to continue?</div>
</ng-template>
